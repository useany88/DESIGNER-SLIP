<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Designer Project Tracker â€” Claim System</title>
  <style>
    :root{
      --bg:#f8fafc;
      --card:#ffffff;
      --muted:#6b7280;
      --accent:#0ea5a4;
      --accent-dark:#0891b2;
      --success:#10b981;
      --border:#e6e9ee;
      --text:#0f1724;
    }
    body{ font-family: Inter, system-ui, -apple-system, "Poppins", sans-serif; background:var(--bg); margin:0; padding:28px; color:var(--text); }
    .container{ max-width:980px; margin:0 auto; background:var(--card); border-radius:14px; padding:22px; box-shadow:0 10px 30px rgba(2,6,23,0.06); }
    h1{ margin:0 0 6px 0; font-size:20px; }
    p.lead{ margin:0 0 18px 0; color:var(--muted); }

    /* top form */
    .top-form{ display:flex; gap:12px; align-items:end; margin-bottom:18px; flex-wrap:wrap; }
    .field{ display:flex; flex-direction:column; gap:6px; }
    label{ font-size:13px; color:var(--muted); }
    input[type="text"], select{ padding:10px 12px; border-radius:8px; border:1px solid var(--border); min-width:180px; font-size:14px; }
    .type-badge{ font-weight:700; padding:8px 12px; border-radius:10px; background:linear-gradient(90deg,var(--accent),var(--accent-dark)); color:#fff; }

    /* status */
    .status-row{ display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; gap:12px; flex-wrap:wrap; }
    .percent, .amount{ font-weight:700; font-size:18px; }
    .progress-wrap{ background:#eef6f8; height:14px; border-radius:999px; overflow:hidden; border:1px solid var(--border); margin-bottom:18px; }
    .progress{ height:100%; width:0%; transition: width 600ms ease; background: linear-gradient(90deg,var(--success), #059669); }

    /* grid */
    .grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(120px,1fr)); gap:14px; margin-bottom:16px; }
    .box{ background:var(--card); border:1px solid var(--border); border-radius:10px; padding:12px; text-align:center; transition:transform .15s, box-shadow .15s; }
    .box:hover{ transform: translateY(-3px); box-shadow:0 6px 18px rgba(2,6,23,0.06); }
    .box.done{ background: #ecfdf5; border-color: rgba(16,185,129,0.2); }
    .label{ color:var(--muted); font-size:13px; }
    .status{ margin-top:6px; font-weight:700; }

    /* buttons */
    .btn{ padding:8px 12px; border-radius:8px; border:0; cursor:pointer; font-weight:700; background:var(--accent); color:white; }
    .btn.secondary{ background:#f3f4f6; color:var(--text); font-weight:600; }
    .claim-btn{ margin-top:12px; padding:10px 18px; border-radius:10px; border:0; cursor:pointer; font-weight:800; background:linear-gradient(90deg,var(--success),var(--accent-dark)); color:white; box-shadow:0 8px 20px rgba(16,185,129,0.16); }

    .footer-row{ display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap; margin-top:12px; }

    .complete-panel{ display:none; margin-top:18px; padding:14px; border-radius:12px; background:#f0fdf4; border:1px solid rgba(16,185,129,0.12); text-align:center; }

    @media (max-width:700px){ .top-form{ flex-direction:column; align-items:stretch } .field input, .field select{ width:100%; } }
  </style>
</head>
<body>
  <div class="container" role="application" aria-label="Designer Project Tracker">
    <h1>Designer Project Tracker</h1>
    <p class="lead">Enter designer details, then mark orders as done. When all 15 are complete, claim the payout based on designer type.</p>

    <!-- Top: Designer details -->
    <div class="top-form" aria-hidden="false">
      <div class="field">
        <label for="designerName">Designer Name</label>
        <input id="designerName" type="text" placeholder="Full name (e.g. Sunny Gupta)" aria-label="Designer name">
      </div>

      <div class="field">
        <label for="designerId">Designer ID (starts with FF / VL / BG)</label>
        <input id="designerId" type="text" placeholder="e.g. VL12345 or FF-001" aria-label="Designer ID">
      </div>

      <div class="field">
        <label for="designerType">Designer Type</label>
        <select id="designerType" aria-label="Designer type">
          <option value="VL">VL â€” â‚¹800</option>
          <option value="BG">BG â€” â‚¹650</option>
          <option value="FF">FF â€” â‚¹500</option>
        </select>
      </div>

      <div class="field" style="margin-left:auto; text-align:right;">
        <label>Selected Payout</label>
        <div class="type-badge" id="selectedPayout">â‚¹800</div>
      </div>
    </div>

    <!-- status -->
    <div class="status-row">
      <div class="percent" id="percentText">0% Completed</div>
      <div class="amount" id="amountText">â‚¹0 Earned</div>
    </div>

    <div class="progress-wrap" aria-hidden="true">
      <div class="progress" id="progressBar"></div>
    </div>

    <!-- grid -->
    <div class="grid" id="boxesContainer" aria-live="polite"></div>

    <div class="footer-row">
      <div>
        <button class="btn" id="autoFillBtn">Auto Complete Next</button>
        <button class="btn secondary" id="resetBtn">Reset</button>
      </div>
      <div style="color:var(--muted); font-size:14px;">
        Completed: <strong id="doneCount">0</strong> / 15
      </div>
    </div>

    <div class="complete-panel" id="completePanel" role="status" aria-live="polite">
      <div style="font-weight:700; font-size:16px; margin-bottom:6px;">ðŸŽ‰ All Projects Completed</div>
      <div id="completeSub" style="color:var(--muted); margin-bottom:10px;">You are eligible to claim your payout.</div>
      <button class="claim-btn" id="claimBtn">Claim Your Payment</button>
    </div>
  </div>

  <script>
    // CONFIG
    const TOTAL = 15;
    const PAYOUTS = { 'FF': 500, 'BG': 650, 'VL': 800 };

    // STATE
    const state = { completed: 0, boxes: Array(TOTAL).fill(false), payout: PAYOUTS['VL'] };

    // ELEMENTS
    const boxesContainer = document.getElementById('boxesContainer');
    const percentText = document.getElementById('percentText');
    const amountText = document.getElementById('amountText');
    const progressBar = document.getElementById('progressBar');
    const doneCount = document.getElementById('doneCount');
    const completePanel = document.getElementById('completePanel');
    const claimBtn = document.getElementById('claimBtn');

    const designerName = document.getElementById('designerName');
    const designerId = document.getElementById('designerId');
    const designerType = document.getElementById('designerType');
    const selectedPayout = document.getElementById('selectedPayout');

    // HELPER: calculate current earned amount
    function calcAmount(completed, payout) {
      // Compute (completed * payout) / TOTAL with rounding
      // Multiply first to avoid float precision issues.
      const numerator = completed * payout;
      const raw = numerator / TOTAL;
      return Math.round(raw);
    }

    // Render boxes
    function renderBoxes() {
      boxesContainer.innerHTML = '';
      for (let i = 0; i < TOTAL; i++) {
        const div = document.createElement('div');
        div.className = 'box' + (state.boxes[i] ? ' done' : '');
        div.innerHTML = `
          <div class="label">Order #${i+1}</div>
          <div class="status">${state.boxes[i] ? 'Done âœ…' : 'Pending'}</div>
          <div style="margin-top:10px;">
            <button class="btn" data-index="${i}" aria-label="toggle order ${i+1}">${state.boxes[i] ? 'Undo' : 'Mark Done'}</button>
          </div>
        `;
        boxesContainer.appendChild(div);
      }
    }

    // Update full UI based on state
    function updateUI() {
      const pct = Math.round((state.completed / TOTAL) * 100);
      percentText.textContent = pct + '% Completed';

      const amount = (state.completed === TOTAL) ? state.payout : calcAmount(state.completed, state.payout);
      amountText.textContent = â‚¹${amount} Earned;

      progressBar.style.width = pct + '%';
      doneCount.textContent = state.completed;

      // Show complete panel only when all done
      completePanel.style.display = (state.completed === TOTAL) ? 'block' : 'none';

      renderBoxes();
    }

    // Toggle a box
    boxesContainer.addEventListener('click', (e) => {
      const btn = e.target.closest('button[data-index]');
      if (!btn) return;
      const idx = Number(btn.dataset.index);
      state.boxes[idx] = !state.boxes[idx];
      state.completed = state.boxes.filter(Boolean).length;
      updateUI();
    });

    // Auto complete next
    document.getElementById('autoFillBtn').addEventListener('click', () => {
      const next = state.boxes.indexOf(false);
      if (next === -1) return;
      state.boxes[next] = true;
      state.completed = state.boxes.filter(Boolean).length;
      updateUI();
    });

    // Reset
    document.getElementById('resetBtn').addEventListener('click', () => {
      if (!confirm('Reset all progress?')) return;
      state.boxes.fill(false);
      state.completed = 0;
      updateUI();
    });

    // Claim action (replace alert with API call as needed)
    claimBtn.addEventListener('click', () => {
      const name = (designerName.value || '').trim();
      const id = (designerId.value || '').trim();
      const type = designerType.value || 'VL';
      const amount = state.payout;

      if (!name) { alert('Please enter the designer name before claiming.'); designerName.focus(); return; }
      if (!id) { alert('Please enter the designer ID before claiming.'); designerId.focus(); return; }

      // Here you can replace this alert with a fetch() to your server to submit the claim.
      alert(Claim submitted:\nName: ${name}\nID: ${id}\nType: ${type}\nAmount: â‚¹${amount}\n\nWe will process your payout shortly.);
    });

    // Designer type selector change
    designerType.addEventListener('change', () => {
      const t = designerType.value;
      state.payout = PAYOUTS[t] || PAYOUTS['VL'];
      selectedPayout.textContent = â‚¹${state.payout};
      updateUI();
    });

    // Auto-detect type from typed ID (first two letters)
    designerId.addEventListener('input', () => {
      const val = designerId.value.trim().toUpperCase();
      if (val.length >= 2) {
        const prefix = val.slice(0,2);
        if (PAYOUTS.hasOwnProperty(prefix)) {
          designerType.value = prefix;
          state.payout = PAYOUTS[prefix];
          selectedPayout.textContent = â‚¹${state.payout};
          updateUI();
          return;
        }
      }
      // if not detected, do not change the selected type.
    });

    // Initialize defaults: default type VL -> 800
    (function init(){
      designerType.value = 'VL';
      state.payout = PAYOUTS['VL'];
      selectedPayout.textContent = â‚¹${state.payout};
      renderBoxes();
      updateUI();
    })();
  </script>
</body>
</html>
